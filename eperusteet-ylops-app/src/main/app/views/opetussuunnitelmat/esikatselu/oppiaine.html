<h1 kaanna="oppiaine.nimi"></h1>
<div class="vuosiluokka-valinta">
  <span kaanna="'vuosiluokka'"></span>
  <ul>
    <li ng-repeat="vuosiluokka in vuosiluokat | orderBy:'vuosiluokka'" ng-class="{active: isActive(vuosiluokka)}">
      <a ui-sref="^.oppiaine({vuosiluokka: vuosiluokka.vuosiluokka})" kaanna="vuosiluokka.vuosiluokka"></a>
    </li>
  </ul>
</div>

<div esitys-teksti="oppiaine.tehtava" esitys-peruste="perusteOppiaine.tehtava" show-peruste="true"></div>

<div ng-repeat="vlk in oppiaine.vuosiluokkakokonaisuudet | orderBy:vlkSort track by vlk._vuosiluokkakokonaisuus">
  <h2 kaanna="vlkMap[vlk._vuosiluokkakokonaisuus].vuosiluokkakokonaisuus.nimi"></h2>

  <div ng-if="oppiaine.tyyppi === 'yhteinen'">
    <div esitys-teksti="vlk.tehtava" esitys-peruste="perusteOppiaineVlkMap[vlk._vuosiluokkakokonaisuus].tehtava" show-peruste="true"></div>

    <div esitys-teksti="vlk.tyotavat" esitys-peruste="perusteOppiaineVlkMap[vlk._vuosiluokkakokonaisuus].tyotavat" show-peruste="true"></div>
    <div esitys-teksti="vlk.ohjaus" esitys-peruste="perusteOppiaineVlkMap[vlk._vuosiluokkakokonaisuus].ohjaus" show-peruste="true"></div>
    <div esitys-teksti="vlk.arviointi" esitys-peruste="perusteOppiaineVlkMap[vlk._vuosiluokkakokonaisuus].arviointi" show-peruste="true"></div>
  </div>

  <div ng-if="oppiaine.tyyppi !== 'yhteinen'">
    <h3 ng-bind-html="vlk.tehtava.otsikko | kaanna | unsafe"></h3>
    <div ng-bind-html="vlk.tehtava.teksti | kaanna | unsafe"></div>
    <h3 ng-bind-html="vlk.tyotavat.otsikko | kaanna | unsafe"></h3>
    <div ng-bind-html="vlk.tyotavat.teksti | kaanna | unsafe"></div>
    <h3 ng-bind-html="vlk.ohjaus.otsikko | kaanna | unsafe"></h3>
    <div ng-bind-html="vlk.ohjaus.teksti | kaanna | unsafe"></div>
    <h3 ng-bind-html="vlk.arviointi.otsikko | kaanna | unsafe"></h3>
    <div ng-bind-html="vlk.arviointi.teksti | kaanna | unsafe"></div>
  </div>

  <h2 ng-if="vlk.vuosiluokat.length > 0" kaanna="'tavoitteet-ja-sisallot-vuosiluokittain'"></h2>

  <div ng-repeat="vuosiluokka in vlk.vuosiluokat | orderBy:'vuosiluokka' track by vuosiluokka.vuosiluokka">
    <h3 ng-bind="('vuosiluokka' | kaanna) + ' ' + vuosiluokka.$numero"></h3>

    <div ng-if="oppiaine.tyyppi === 'yhteinen'">
      <h3 kaanna="'tavoitteet'"></h3>

      <div ng-repeat="tunniste in vuosiluokkaSisallot[vlk._vuosiluokkakokonaisuus][vuosiluokka.vuosiluokka].tunnisteet"
        ng-init="vs = vuosiluokkaSisallot[vlk._vuosiluokkakokonaisuus][vuosiluokka.vuosiluokka]">
        <h4 ng-bind-html="vs.tavoiteMap[tunniste].$tavoite | kaanna | unsafe"></h4>
        <!-- TODO tavoitteelle näytettävät tiedot? -->
        <div ng-bind-html="vs.muokattavat[tunniste].teksti | kaanna | unsafe"></div>
      </div>

      <h3 kaanna="'sisaltoalueet'"></h3>
      <div esitys-teksti="" esitys-peruste="vuosiluokkaSisallot[vlk._vuosiluokkakokonaisuus][vuosiluokka.vuosiluokka].perusteOpVlk.sisaltoalueinfo" show-peruste="true"></div>
      <div ng-repeat="tunniste in vuosiluokkaSisallot[vlk._vuosiluokkakokonaisuus][vuosiluokka.vuosiluokka].sisaltoaluetunnisteet"
        ng-init="vs = vuosiluokkaSisallot[vlk._vuosiluokkakokonaisuus][vuosiluokka.vuosiluokka]">
        <h4 ng-bind-html="vs.perusteSisaltoalueet[tunniste].nimi | kaanna | unsafe"></h4>
        <div class="esitys-peruste" ng-bind-html="vs.perusteSisaltoalueet[tunniste].kuvaus | kaanna | unsafe"></div>
        <div ng-bind-html="vs.sisaltoaluemuokattavat[tunniste].teksti | kaanna | unsafe"></div>
      </div>

    </div>

    <div ng-if="oppiaine.tyyppi !== 'yhteinen'">
      <div ng-repeat="tavoite in vuosiluokkaSisallot[vlk._vuosiluokkakokonaisuus][vuosiluokka.vuosiluokka].valinnaisenTekstiosat">
        <h4 ng-bind-html="tavoite.otsikko | kaanna | unsafe"></h4>
        <div ng-bind-html="tavoite.teksti | kaanna | unsafe"></div>
      </div>
    </div>

  </div>

</div>
