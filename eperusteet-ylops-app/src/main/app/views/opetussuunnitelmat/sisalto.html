<div class="row" ng-show="model.$resolved">
  <div class="col-md-4 col-sm-6" ng-repeat="osio in ['jarjestaminen', 'lahtokohdat']">
    <div class="list-group sisalto-osio">
      <a class="list-group-item list-group-header"
         ui-sref="root.opetussuunnitelmat.yksi.sisaltoalue({alueId: model[osio].id})">
         <div class="kontrollit" ng-hide="rakenneEdit[osio]">
           <span ng-hide="isAdding()" ng-click="rakenne.add(osio, $event)" icon-role="add" ng-attr-title="{{'luo-uusi-tekstikappale' | kaanna}}"></span>
           <span ng-click="rakenne.edit(osio, $event)" icon-role="edit" ng-attr-title="{{'muokkaa-rakennetta' | kaanna}}"></span>
         </div>
        <span ng-bind="model[osio].tekstiKappale.nimi | kaanna"></span>
      </a>

      <div ng-if="adding[osio]" class="list-group-item">
        <input class="form-control" ng-model="uusi.nimi" slocalized ng-enter="hasText() && rakenne.doAdd(osio)"
               placeholder="{{'luo-uusi-tekstikappale'|kaanna}}">
        <div class="pull-right">
          <button class="btn btn-default" kaanna="'peruuta'" ng-click="rakenne.cancelAdd(osio)"></button>
          <button class="btn btn-primary" kaanna="'lisaa'" ng-click="rakenne.doAdd(osio)" ng-disabled="!hasText()"></button>
        </div>
        <div class="clearfix"></div>
      </div>

      <div ng-if="!rakenneEdit[osio]" class="list-group-item" ng-repeat="item in model[osio].lapset">
        <a ng-if="kappaleEdit !== item" ui-sref="root.opetussuunnitelmat.yksi.tekstikappale({tekstikappaleId: item.id})"
           ng-class="{editable: canRemove(item)}">
          <span ng-bind="item.tekstiKappale.nimi | kaanna"></span>
        </a>
        <div class="input-group" ng-if="kappaleEdit === item">
          <input ng-model="item.tekstiKappale.nimi" slocalized class="form-control">
          <span class="input-group-btn">
            <button class="btn btn-default" ng-click="rakenne.cancelTitle(item)" kaanna="'peruuta'"></button>
            <button class="btn btn-primary" ng-click="rakenne.saveTitle(item)" kaanna="'tallenna'"></button>
          </span>
        </div>
        <div class="floater-ops" ng-if="canRemove(item) && !kappaleEdit">
          <span class="kappale-ops" ng-click="rakenne.editTitle(osio, item)" icon-role="edit" ng-attr-title="{{'muokkaa-otsikkoa' | kaanna}}"></span>
          <span class="kappale-ops" ng-click="rakenne.deleteKappale(osio, item)" icon-role="remove" ng-attr-title="{{'poista' | kaanna}}"></span>
        </div>
      </div>

      <div ng-if="rakenneEdit[osio]" class="list-group-item pohjan-muokkaus">
        <div class="rakenne">

          <button class="btn btn-default" kaanna="'peru-rakenne'" ng-click="rakenne.cancel(osio)"></button>
          <button class="btn btn-primary" kaanna="'tallenna-rakenne'" ng-click="rakenne.save(osio)"></button>

          <div ng-show="model[osio].lapset.length > 0" ui-tree class="tekstikappaleet" data-empty-place-holder-enabled="true">
            <ul ui-tree-nodes ng-model="model[osio].lapset">
              <li ng-repeat="kappale in model[osio].lapset" ui-tree-node ng-include="'views/opetussuunnitelmat/treenode.html'"></li>
            </ul>
          </div>

        </div>
      </div>
    </div>
  </div>
  <div class="col-md-4 col-sm-6">
    <div class="list-group">
      <a class="list-group-item list-group-header" kaanna="'vuosiluokat-ja-oppiaineet'"
         ui-sref="root.opetussuunnitelmat.yksi.sisaltoalue({alueId: 'vuosiluokat'})"></a>
      <a class="list-group-item" ng-repeat="item in vuosiluokkakokonaisuudet" ng-bind="item.vuosiluokkakokonaisuus.nimi | kaanna"
         ui-sref="root.opetussuunnitelmat.yksi.vuosiluokkakokonaisuus({vlkId: item.vuosiluokkakokonaisuus.id})"></a>
    </div>
  </div>
</div>
